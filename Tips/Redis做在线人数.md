# Redis做在线人数
在线统计是很多 SNS 的常见功能。最近在优化 V2EX 的过程中，实现了一种新的方式，性能不错，分享给大家。

* 使用一个单独的 Redis 数据库
* 每个在线用户是一条带有 TTL 的记录，在每次 Session 开始时写入这条记录到 Redis
* 需要统计当前有多少人在线的话，只需要在这个数据库上用 dbsize() 就可以获得，不会遇到 keys() 可能带来的性能问题

https://www.v2ex.com/t/298920#reply23

