# 函数

##定义

```python
# 格式
def func(param):
    code
    
# 空函数
def nop():
    pass

# 带返回值
def returnFun():
    code
    return xxx
```
>* pass语句什么都不做，那有什么用？实际上pass可以用来作为占位符，比如现在还没想好怎么写函数的代码，就可以先放一个pass，让代码能运行起来。
>* 返回值可以是多个值，返回的是一个tuple，会根据元素位置传递给调用函数的地方。


##参数

###位置参数
即参数定义与参数传递的顺序一一对应：

```python
# 定义
def power(x, n):
    s = 1
    while n > 0:
        n = n - 1
        s = s * x
    return s

# 调用
result = power(5,2)
result = power(5,3)
```

###默认参数
为后面的参数定义设置默认值，当函数在调用时没有传入该参数时则取默认值

```shell
# 定义
def power(x, n=2):
    s = 1
    while n > 0:
        n = n - 1
        s = s * x
    return s

# 调用
result = power(5) # n取2
```

###可变参数
参数个数不确定的情况，以`*`定义可变参数，在调用时传入多个参数，但在函数内部接收的是tuple。

```python
# 定义
def calc(*numbers):
    sum = 0
    for n in numbers:
        sum = sum + n * n
    return sum
    
# 调用，传入一个或多个参数
>>> calc(1, 2)
5
>>> calc()
0

# 将list/tuple传入到可变函数中
>>> nums = [1, 2, 3]
>>> calc(*nums)
14
```

###关键字参数
可变参数是参数个数不确定，关键字参数是允许传递0个或任意个`含参数名`的参数。

```python
# 定义
def person(name, age, **kw):
    print('name:', name, 'age:', age, 'other:', kw)
    
# 调用，不传入关键字参数
>>> person('Michael', 30)
name: Michael age: 30 other: {}

# 调用，传入关键字参数
>>> person('Bob', 35, city='Beijing')
name: Bob age: 35 other: {'city': 'Beijing'}
>>> person('Adam', 45, gender='M', job='Engineer')
name: Adam age: 45 other: {'gender': 'M', 'job': 'Engineer'}

# 调用，将dict封装到关键字参数
>>> extra = {'city': 'Beijing', 'job': 'Engineer'}
>>> person('Jack', 24, **extra)
name: Jack age: 24 other: {'city': 'Beijing', 'job': 'Engineer'}
```

###命名关键字参数
限制关键字参数的命名，定义时命名关键字参数和其他参数以`*`分隔（这里*不是表示参数，仅作分隔符）。

```python
# 定义，只传入city和job两个关键字参数，在调用的时候必须注明关键字参数的命名
def person(name, age, *, city, job):
    print(name, age, city, job)

>>> person('Jack', 24, city='Beijing', job='Engineer')
Jack 24 Beijing Engineer

# 调用，不传入参数名，会被当成位置参数，因此报错
>>> person('Jack', 24, 'Beijing', 'Engineer')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: person() takes 2 positional arguments but 4 were given

# 定义命名关键字参数的默认值
def person(name, age, *, city='Beijing', job):
    print(name, age, city, job)
```

###参数组合

参数定义的顺序必须是：必选参数、默认参数、可变参数/命名关键字参数和关键字参数。

##递归

```python
def fact(n):
    if n==1:
        return 1
    return n * fact(n - 1)
```
每进入一个函数调用，栈会增加一层栈帧，每当一个函数返回，栈就会减少一层栈帧，当调用递归的层数太多，可能会导致调用栈溢出。

###尾递归
尾递归可以避免调用栈溢出:
>* 在函数返回的时候，调用自身本身;
>* return语句不能包含表达式。

```python
def fact(n):
    return fact_iter(n, 1)

def fact_iter(num, product):
    if num == 1:
        return product
    return fact_iter(num - 1, num * product)    # num * product 在函数调用前会计算
```

##匿名函数lambda

```python
lambda x: x * x
# 相当于
def f(x):
    return x * x;

# 将匿名函数赋值给一个变量
>>> f = lambda x: x * x
>>> f
<function <lambda> @ 0x101c6ef28>
>>> f(5)
25
```

##偏函数
`functools.partial()`，将函数的某些参数设定为一个固定的值，返回一个新的函数。新的函数为原来的偏函数。

```python
>>> import functools
>>> def func(x, y):
...     return x + y
...
>>> func(1,2)
3
# 创建偏函数
>>> func1 = functools.partial(func, y = 1);
>>> func1(1)
2

# 以关键字形式传入
>>> temp = {'y':2}
>>> func2 = functools.partial(func, **temp);
>>> func2(2)
4
```


