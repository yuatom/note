# 生成器

##生成器
generator：可一边循环一边计算的机制。

###定义生成器

```python
def fib(max):
    n, a, b = 0, 0, 1
    while n < max:
        yield b     # 通过yield将函数变成生成器，返回b
        a, b = b, a + b
        n = n + 1
    return 'done'
```


###调用

####next()调用
一般的函数是顺序执行，遇到return则退出。而生成器是在传入到`next()`时调用，遇到yield时返回，再次执行时从上一次返回yield语句处继续。

```python
>>> f = fib(10)
>>> next(f)
1
>>> next(f)
1
>>> next(f)
2
>>> next(f)
3
>>> next(f)
5
>>> next(f)
8
```

####for循环中调用

```python
>>> for n in fib(6):
...     print(n)
...
1
1
2
3
5
8
```
当用for循环调用时，会获取不到generator中return的值。需要捕获`StopIteration`异常才能获取。

###实现杨辉三角
          1
        1   1
      1   2   1
    1   3   3   1
  1   4   6   4   1
1   5   10  10  5   1

```python
# -*- coding: utf-8 -*-

def triangles():
    l = [1]
    while True:
        yield l
        l.insert(0,0)
        l.append(0)
        l = [a + b for a,b in zip(l,l[1:])]

n = 0
for t in triangles():
    print(t)
    n = n + 1
    if n == 10:
        break
```

```python
def triangles():
    N = [1]
    while True:
        yield N
        N.append(0)
        N = [N[i-1] + N[i] for i in range(len(N))]
```


