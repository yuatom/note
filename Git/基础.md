# 基础

﻿http://www.open-open.com/lib/view/1328069609436
##版本控制
git的版本控制是基于整体快照，而svn等工具是基于文件的差异。
git中提交修改的文件时，是将整体提交到新的版本中（保存更改的文件，没有更改的文件则做一个上版本中的文件快照）；
而svn在新版本中保存的是文件间的差异（哪些文件被更改，更改了哪些地方）

##控制过程
在git的版本控制中，除了在远程的库存放项目，还会在本地存一份。 提交到本地库-》提交到远程库 因此当远程库崩溃时，也可从本地的库中再恢复到远程。 由于一开始操作的库均在本地，因此不需要网络支持，可以在工作时将修改提交到本地库，有网络的时候再提交到远程库。  ##文件状态 在git的工作过程中文件有三种状态 当修改文件或创建文件时，文件的状态是已修改 当将已修改的文件添加到待提交列表时，状态是已暂存 将待提交的列表提交时，文件的状态为已提交 1. 在工作目录中修改某些文件；
2.  对修改后的文件进行快照，然后保存到暂存区域。 3. 提交更新，将保存在暂存区域的文件快照永久转储到 Git 目录中。 
##配置
###系统配置
系统配置是针对当前计算机的所有用户    ./etc/gitconfig    git config --system 
###用户配置
用户配置是针对当前登录的用户             
~/.gitconfig         git config --global 
##目录配置
目录配置针对当前工作目录                 .git/config 目录配置会覆盖用户配置中的相同项，用户配置会覆盖系统配置  git config --list    查看配置  http://www.open-open.com/lib/view/open1328069733264.html http://blog.jobbole.com/25808/ 
##创建git库
在已存在的项目目录下git init 将远程库上的文件clone到当前目录

###init命令
init会在本地生成.git文件，其中会记录当前目录下的文件要进行git版本控制，当init后在执行commit时，则是将当前目录下的文件提交到库中。如果在init后创建了新文件，需要对新文件执行add命令。#init命令中已将当前目录下的文件都add操作。 
###clone操作

```sh
git clone git://github.com/schacon/grit.git 
#在当前目录下创建grit目录，并将远程库中grit文件夹下的文件导入该目录中
git clone git://github.com/schacon/grit.git  mygrit     
#在当前目录下创建mygrit目录，并将远程库中grit文件夹下的文件导入该目录中
```  同样是将远程库中的文件导入到本地，svn仅是导入远程库中当前的版本信息，导入后本地不记录该版本之前的信息；而git会导入该项目从创建开始的每一个版本的信息，因此导入到本地的版本信息可以在本地恢复到以前的任一版本。 
##状态
###git status
检查当前目录下的文件状态，包括列出哪些分支，哪些文件的不同状态 当一个文件创建时，如果不做任何操作，当前文件状态为未追踪，在提交时git并不会将该文件提交，需要执行add操作将该文件添加到待提交的列表（暂存状态） 
###创建，未暂存
```shell $ vim README $ git status # On branch master # Untracked files: #   (use "git add 
     ..." to include in what will be committed)
# #   README            //未追踪 nothing added to commit but untracked files present (use "git add" to track)
```

###暂存
git add .        所有文件加入暂存区
```sh
$ git add README $ git status # On branch master # Changes to be committed: #   (use "git reset HEAD 
     ..." to unstage) # #   new file:   README            //已暂存，待提交 #
```

##忽略某些文件
在项目目录下创建.gitignore文件，该文件记录的文件将会被忽略不被提交，可使用通配符。
示例：

```shell
# 此为注释 – 将被 Git 忽略
*.a           # 忽略所有 .a 结尾的文件
!lib.a        # 但 lib.a 除外
/TODO     # 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO
build/        # 忽略 build/ 目录下的所有文件
doc/*.txt     # 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt
```

###git diff
不加参数只比较当前文件与暂存区文件的差异
git diff --cached    比较暂存区和已提交的快照之间的差异    高版本使用 git diff --staged


##提交
git commit
该命令将暂存区的文件提交到git库中，类似svn中的提交。 该命令需要带上-m参数，后面跟该次提交的信息 git commit -m "add index.php" 
git commit -a    该命令将跳过暂存区，直接将所有跟踪过的已修改的文件提交到库


##移除文件
本地移除    rm 文件名 本地移除文件并不会将该更改提交到git库中，需要再将该操作git到库中 git rm 文件名 如果删除之前修改过并且已经放到暂存区域的话，则必须要用强制删除选项 -f（译注：即 force 的首字母），以防误删除文件后丢失修改的内容。  删除缓存中文件，不删除本地，即不再追踪该文件 git rm --cached 文件名    

##移动文件
git中不会追踪文件的移动及改名等操作，即当使用普通操作对文件进行重命名或移动时，git库中不会同步这些操作
git mv 文件名    新文件名
以上操作相当于，mv 文件名  新文件名    git rm 文件名    git add 新文件名


##查看提交历史
git log    不加参数时默认列出所有更新历时
git log -p 列出每次提交的内容差异
git log -p -2 列出最近两条
git log --stat    显示更新时的信息及摘要
git log --pretty=oneline    pretty选项可设置格式，如=oneline是将每个提交结果放在一行。
另外还有 short，full 和fuller 可以用，展示的信息或多或少有些不同，可以定制要显示的记录格式
--pretty=format:"%h - %an, %ar : %s"    
$ git log --pretty=format:"%h - %an, %ar : %s"
ca82a6d - Scott Chacon, 11 months ago : changed the version number
085bb3b - Scott Chacon, 11 months ago : removed unnecessary test code
a11bef0 - Scott Chacon, 11 months ago : first commit
%H      提交对象（commit）的完整哈希字串 %h      提交对象的简短哈希字串 %T      树对象（tree）的完整哈希字串 %t      树对象的简短哈希字串 %P      父对象（parent）的完整哈希字串 %p      父对象的简短哈希字串 %an     作者（author）的名字 %ae     作者的电子邮件地址 %ad     作者修订日期（可以用 -date= 选项定制格式） %ar     作者修订日期，按多久以前的方式显示 %cn     提交者(committer)的名字 %ce     提交者的电子邮件地址 %cd     提交日期 %cr     提交日期，按多久以前的方式显示 %s      提交说明

##撤销操作
修改最后一次提交的操作git commit --amend
如果将暂存区的文件提交之后，发现还有部分文件未添加到暂存区，可将这些文件添加到暂存区，再执行git commit --amend，表示将这些文件追加到上一次提交操作。

##取消已经暂存的文件
git reset HEAD    文件名

##取消对文件的修改
git checkout -- 文件名        恢复到修改前的状态，即和库中的一致

```shell
$ git status # On branch master # Changes to be committed: #   (use "git reset HEAD             //已暂存的文件，使用git reset HEAD 文件名可将该文件从暂存区删除 
     ..." to unstage)
# #       modified:   README.txt # # Changed but not updated: #   (use "git add                                 //修改但未暂存的文件，使用git add 文件名可将该文件加只暂存区 
      ..." to update what will be committed)
#   (use "git checkout --                         //使用git checkout -- 文件名可将该文件恢复到修改前的状态 
       ..." to discard changes in working directory)
# #       modified:   benchmarks.rb #



远程库
git clone git://github.com/schacon/ticgit.git        //从远程库克隆项目到当前目录
git remote    列出远程库的简短名字  加上-v选项将显示远程地址
$ git remote -v
bakkdoor  git://github.com/bakkdoor/grit.git
cho45     git://github.com/cho45/grit.git
defunkt   git://github.com/defunkt/grit.git
koke      git://github.com/koke/grit.git
origin    git@ github.com:mojombo/grit.git

$ git remote add  自定义远程库名  地址     添加远程库
$ git remote add pb git://github.com/paulboone/ticgit.git

git fetch 远程库名        将远程库的名字抓取到本地
fetch后可以在本地访问该远程仓库中的所有分支，将其中某个分支合并到本地，或者只是取出某个分支

git push [remote-name] [branch-name]    将本地git库的数据更新到远程库中
git push origin master        将本地origin下master分支中的数组更新到远程库中的master分支中
= git push origin master:master，即将本地的master分支推送到远程库的master
git push origin localBranch:remoteBranch


git remote show [remote-name]    查看远程库的信息

$ git remote rename pb paul        远程库重命名

$ git remote rm paul        删除远程库



标签


命令别名













http://blog.csdn.net/weinianjie1/article/details/8947966

