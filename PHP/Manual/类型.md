# 类型

##int
十进制：    [1-9][0-9]* | 0
十六进制：   0[xX][0-9a-fA-F]+
八进制：    0[0-7]+

32bit下最大约二十亿（32 位有符号），64bit下最大值通常是大约 9E18。
最大值常量：PHP_INT_MAX

##float
LNUM          [0-9]+
DNUM          ([0-9]*[\.]{LNUM}) | ({LNUM}[\.][0-9]*)
EXPONENT_DNUM [+-]?(({LNUM} | {DNUM}) [eE][+-]? {LNUM})

```php
<?php
// 表现性格
$a = 1.234; 
$b = 1.2e3; 
$c = 7E-10;
?>
```

##string
###单引号
单引号内的变量和特殊字符都不会被转换，包括双引号。
要在单引号中使用`’`，需要用`\`转义。

###双引号
双引号中会解析变量名，同时会将"\n、\r、\\"等转义

###Heredoc <<<
Heredoc结构需要在定义时在`<<<`后面指定标示符，然后另起一行开始字符定义，在定义结束时换行以表示符结束，结束标识符前不能有空格。
Heredoc结构相当于双引号，Nowdoc结构的作用相当于单引号，使用方式类似。

```php
<?php
$str = <<<EOD
Example of string
spanning multiple lines
using heredoc syntax.
EOD; 

echo <<<EOT
My name is "$name". I am printing some $foo->foo.
Now, I am printing some {$foo->bar[1]}.
This should print a capital 'A': \x41
EOT;

```

###花括号解析变量

```php
$great = 'fantastic';

echo "This is { $great}";   // wrong
echo "This is {$great}";    // right
echo "This is ${great}";    // right
echo "This works: {$arr['key']}";   // right，关联数组
echo "This square is {$square->width}00 centimeters broad.";    // 对象属性
echo "This works: {$arr[4][3]}";    // right，索引数组，
echo "This is wrong: {$arr[foo][3]}";   // 错误，需要在有定义foo这个常量能运行
echo "This works: {$arr['foo'][3]}";    // 正确，关联数组，查找foo这个下标
```

###通过下标访问字符串中的字符
$str[0]，访问str字符串的第一个字符
\$str{0}，作用与\$str[0]一样

###字符串转数值
如果字符串中没有'.'，'e' 或 'E' 并且大小在PHP_INT_MAX之内，则转化为int，否则为float。
如果字符串以合法数值开始，转化为数值后的值为该合法数值，否则为0。

```php
<?php
$foo = 1 + "10.5";                // $foo is float (11.5)
$foo = 1 + "-1.3e3";              // $foo is float (-1299)
$foo = 1 + "bob-1.3e3";           // $foo is integer (1)
$foo = 1 + "bob3";                // $foo is integer (1)
$foo = 1 + "10 Small Pigs";       // $foo is integer (11)
$foo = 4 + "10.2 Little Piggies"; // $foo is float (14.2)
$foo = "10.0 pigs " + 1;          // $foo is float (11)
$foo = "10.0 pigs " + 1.0;        // $foo is float (11)     
?>
```

###字符串的实现
string的实现方式是一个由字节组成的数组再加上一个整数指明缓冲区长度。

##数组
通过`array()`或`[]`（PHP5.4之后）来定义。
数组的key可以是int或string，value可以是任何类型。数组和对象不能作为键名。

```php
<?php
$array = array(
    "foo" => "bar",
    "bar" => "foo",
);

// 自 PHP 5.4 起
$array = [
    "foo" => "bar",
    "bar" => "foo",
];
?>
```

###key强制转化
>* 如果是包含合法的十进制数值的字符串会被转化存储为int;
>* 如果是浮点数，也会被转化成int，舍弃其小数部分;
>* 如果是布尔值，true会被转化成1，其他转化成0；
>* null会被转化成空字符串""。


###转换为数组
任意`integer`，`float`，`string`，`boolean` 和 `resource` 类型的变量转换为数组，将得到一个只有一个元素的数组，该元素为要转换的变量，并且下标是0，即：
(array)\$var = array(\$var);

对象转换为数组，对象中的属性将会转换为数组的元素，下标为属性名。

###数组拷贝
通过等号直接赋值将得到一个数组变量的拷贝，通过引用赋值（`&`），将使得两个变量指向同一个值。

```php
<?php
$arr1 = array(2, 3);
$arr2 = $arr1;
$arr2[] = 4; // $arr2 is changed,
             // $arr1 is still array(2, 3)
             
$arr3 = &$arr1;
$arr3[] = 4; // now $arr1 and $arr3 are the same
?>
```

##Resource 资源
资源类型的变量是一种特殊变量，保存了到外部资源的一个引用。

##NULL
变量为NULL的情况：
>* 赋值为NULL
>* 未被赋值
>* 被unset()

可通过用`is_null()`来判断是否为NULL。

###转换为NULL
通过`(unset) $var `来返回一个NULL，该操作不会删除变量会unset其值。

##Callback回调
PHP5.4起可用callable类型回调类型callback。
使用call_user_func()函数调用函数/方法。

```php
// 传递函数名
call_user_func('my_callback_function'); 

// 通过数组调用静态方法
call_user_func(array('MyClass', 'myCallbackMethod')); 

// 通过数组调用对象方法
call_user_func(array($obj, 'myCallbackMethod'));

// 通过字符串调用静态方法
call_user_func('MyClass::myCallbackMethod');
```

使用array_map()调用函数

```php
$fun = function(){}
$res = array_map($fun,$param);
```


