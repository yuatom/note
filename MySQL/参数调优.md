# 参数调优

## 基准测试工具
sysbench
iibench-mysql
tpcc-mysql


## 参数
### back_log
表示连接数达到max_connection时，堆栈中能保存多少个新的连接请求，默认是50。

### wait_timeout
表示数据库连接闲置的时间，闲置的连接会占用内存资源，默认是8小时。

### max_user_connection
最大连接数，默认是0。

### thread_concurrency
并发线程数，设置为CPU核数的两倍。

### skip_name_resolve
进制对外部连接进行DNS解析，可去掉DNS解析的时间，但是需要客户端通过IP访问。

### key_buffer_size
索引块的缓存大小。增加改缓存可以提升索引处理速度，对MyISAM表性能影响最大。
保证key_reads/key_read_requests在0.1%一下最好。
两个变量通过 SHOW status like 'key_read%' 查询。

### innodb_buffer_pool_size
缓存数据块和索引块，对innoDB表性能影响最大。
保证(Innodb_buffer_pool_read_requests - Innodb_buffer_pool_reads) / Innodb_buffer_pool_read_requests越高越好。
两个变量通过 SHOW status like 'Innodb_buffer_pool_read%' 查询。

### innodb_additional_mem_pool_size
Innodb存储引擎用来存放数据字典信息以及一些内部数据结构的`内存空间`大小。
当数据库对象非常多的伤害，适当调整该参数以确保所有数据都能缓存在内存中。
当这个值过小时，MySQL会记录Warning信息到日志中。

### innodb_log_buffer_size
Innodb事务日志所使用的缓冲区，一般不建议超过32MB。

### query_cache_size
缓存一条SQL语句执行的结果集（ResultSet）。
当表中的数据有变化时，都会导致该表的Query Cache失效。如果在数据变化频繁的情况下，使用该缓存可能会得不偿失。
根据 (Qcache_hits / ( Qcache_hits + Qcache_inserts) * 100 ))进行调整。

### read_buffer_size
MySQL读入缓冲区大小。
当对表进行顺序扫描时会分配一个内存缓冲区。如果对表的顺序扫描请求非常频繁，可通过增加该值有一集内存缓冲区大小提高性能。

### sort_buffer_size
MySQL执行排序使用的缓冲大小。
优先考虑使用索引排序，再尝试增加该变量大小。

### read_rnd_buffer_size
MySQL的随机读缓冲大小。当按任意顺序读取行（例如按照排序顺序），将分配一个随机读缓冲区。
进行排序查询时，MySQL会先扫描一边该缓冲区，以避免磁盘搜索。
如果需要怕徐大量数据，可适当调高该值。当MySQL会为每一个连接发放该缓冲空间，所以如果该值太大时，会增加内存开销。

### record_buffer
进行顺序扫描时会为扫描的每张表分配一个缓冲区。

### thread_cache_size
线程缓存大小。
当前没有与连接关联，但是准备为后面新的连接服务的线程。

### table_cache
类似于thread_cache，用来缓存表文件。主要用于MyISAM。